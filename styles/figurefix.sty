\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{figurefix}[2018/01/25]

  \@ifpackageloaded{tikz}{
    %https://tex.stackexchange.com/questions/40135/htlatex-and-tikz-creates-sometimes-incorrect-svgs
    \usetikzlibrary{external}
    \tikzexternalize[prefix=./figures/pdf/]
    \tikzexternalize[mode=only graphics]
    \AtBeginEnvironment{tikzcd}{\tikzexternaldisable}
    \AtEndEnvironment{tikzcd}{\tikzexternalenable}
    \tikzset{
     pdf export/.style={
      /pgf/images/external info,
      /pgf/images/include external/.code={%
       \includegraphics
       [width=\pgfexternalwidth,height=\pgfexternalheight]
       {##1.pdf}%
      }
     }
    }
    \tikzset{pdf export}
   }{}
