\Preamble{xhtml,mathml}
\Configure{VERSION}{}
\Configure{DOCTYPE}{\HCode{<!DOCTYPE html>\Hnewline}}
\Configure{HTML}{\HCode{<html>\Hnewline}}{\HCode{\Hnewline</html>}}
\Configure{@HEAD}{}
\Configure{@HEAD}{\HCode{<meta charset="UTF-8" />\Hnewline}}
\Configure{@HEAD}{\HCode{<meta name="viewport" content="target-densitydpi=device-dpi; width=device-width; initial-scale=1.0; minimum-scale=1.0; user-scalable=yes;" />\Hnewline}}
\Configure{@HEAD}{\HCode{<meta name="HandheldFriendly" content="True" />\Hnewline}}
\Configure{@HEAD}{\HCode{<meta name="generator" content="TeX4ht
(http://www.cse.ohio-state.edu/\string~gurari/TeX4ht/)" />\Hnewline}}
\Configure{@HEAD}{\HCode{<link
         rel="stylesheet" type="text/css"
         href="\expandafter\csname aa:CssFile\endcsname" />\Hnewline}}
\Configure{@HEAD}{\HCode{<link
         rel="stylesheet" type="text/css"
         href="additional.css" />\Hnewline}}
\Configure{@HEAD}{\HCode{<script type="text/x-mathjax-config">\Hnewline
MathJax.Hub.Config({ 
"fast-preview": {disabled: true},\Hnewline
explorer:{ subtitle: true },\Hnewline
MatchWebFonts: {\Hnewline 
matchFor: { "HTML-CSS": true, NativeMML: false, SVG: false },\Hnewline
fontCheckDelay: 2000,\Hnewline
fontCheckTimeout: 30 * 1000\Hnewline
},\Hnewline
"HTML-CSS": {\Hnewline
preferredFont: "STIX", \Hnewline
availableFonts: ["STIX","TeX"], \Hnewline
webFont: "STIX-Web", \Hnewline
linebreaks: { automatic: false, width: "90\% container" }\Hnewline
},\Hnewline
SVG: { \Hnewline
font: "STIX-Web",\Hnewline
linebreaks: { automatic: false, width: "90\% container" }\Hnewline
},\Hnewline
menuSettings: { collapsible: true, autocollapse: true, explorer: false }\Hnewline
});\Hnewline
</script>\Hnewline}}
\Configure{@HEAD}{\HCode{<script type="text/javascript"\Hnewline
src="https://test-34-moodle.bath.catalyst-eu.net/lib/jquery/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full"\Hnewline
></script>\Hnewline}}
\Configure{@HEAD}{\HCode{<style type="text/css">\Hnewline
  ".MathJax_MathML" {text-indent: 0;}\Hnewline
</style>\Hnewline}}

\ConfigureEnv{pspicture}{\Picture*{}}{\EndPicture}{}{}
\Configure{Picture}{.svg}

%https://tex.stackexchange.com/questions/398025/problems-of-pdf-format-graphic-or-image-when-using-htlatex-to-convert-tex-to-h/398058

\newcommand{\thealt}{No alt text was set.}
\renewcommand{\nextalt}[1]{\renewcommand{\thealt}{#1}}

\Configure{graphics*}{jpg}{
\Picture[\HCode{\thealt}]{\csname Gin@base\endcsname.jpg } 
}
\Configure{graphics*}{png}{
\Picture[\HCode{\thealt}]{\csname Gin@base\endcsname.png }
}
\Configure{graphics*}{pdf}{
\Picture[\HCode{\thealt}]{\csname Gin@base\endcsname.svg }
}
\Configure{graphics*}{eps}{
\Picture[\HCode{\thealt}]{\csname Gin@base\endcsname.svg }
}
\Configure{graphics*}{svg}{
\Picture[\HCode{\thealt}]{\csname Gin@base\endcsname.svg }
}
\Configure{graphics*}{interim}{
\Picture[\HCode{\thealt}]{./figures/latexpdfsvg/\csname Gin@base\endcsname.svg }
}

\newtoks\eqtoks 
\def\PICalt{\LARGE\afterassignment\setimg\eqtoks} 
\def\setimg{\Picture*[{\HCode{\the\eqtoks}}]{ }\the\eqtoks\EndPicture\normalsize}  

%http://michal-h21.github.io/src4ht/tex4ht-html-speechse24.html
\Configure{newtheorem}
    {\ifvmode\IgnorePar\fi\EndP
      \HCode{<div class="newtheorem">}\par\noindent
      \HCode{<span class="head" custom-style="Theorem">}}
    {\HCode{</span>}}
    {\EndP\IgnorePar\HCode{</div>}\ShowPar\par}
 \Css{span.head { font-weight:bold; }}

\Configure{textbf}{\Protect\HCode{<b>}\NoFonts}{\EndNoFonts\Protect\HCode{</b>}}
\Configure{textit}{\Protect\HCode{<i>}\NoFonts}{\EndNoFonts\Protect\HCode{</i>}}

% https://tex.stackexchange.com/questions/321259/tex4ht-changes-in-math-mode-to-x-in-html-when-not-including-usepackaget1f
\def\mathunderscore{\mbox{\textunderscore}}

%This is what to do with environments that aren't dealing with end par correctly
\ConfigureEnv{tabularx}
	{\ifvmode\IgnorePar\fi\EndP}
	{}
	{\EndP\IgnorePar\ShowPar\par}

\input{macros.tex}

\begin{document}
\EndPreamble
